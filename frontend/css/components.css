/* ── Buttons ── */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 7px 14px;
  border: 1px solid transparent;
  border-radius: var(--radius);
  font-size: 13px;
  font-weight: 500;
  transition: all 0.15s;
  white-space: nowrap;
}

.btn:disabled { opacity: 0.5; cursor: not-allowed; }

.btn-primary {
  background: var(--accent);
  color: #fff;
  border-color: var(--accent);
}
.btn-primary:hover:not(:disabled) { background: var(--accent-hover); }

.btn-secondary {
  background: var(--bg-tertiary);
  color: var(--text-primary);
  border-color: var(--border);
}
.btn-secondary:hover:not(:disabled) { background: var(--bg-hover); }

.btn-danger {
  background: transparent;
  color: #ef4444;
  border-color: rgba(239,68,68,0.3);
}
.btn-danger:hover:not(:disabled) { background: rgba(239,68,68,0.1); }

.btn-ghost {
  background: transparent;
  color: var(--text-secondary);
  border-color: transparent;
}
.btn-ghost:hover:not(:disabled) { background: var(--bg-hover); color: var(--text-primary); }

.btn-sm { padding: 4px 10px; font-size: 12px; }
.btn-full { width: 100%; }
.btn-icon { padding: 6px; }

/* ── Badges ── */
.badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  border-radius: 20px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.4px;
}

.badge-wishlist   { background: rgba(99,102,241,0.2);  color: #818cf8; }
.badge-owned      { background: rgba(34,197,94,0.2);   color: #4ade80; }
/* Legacy status badges — kept for graceful display of old items */
.badge-in_progress { background: rgba(245,158,11,0.2); color: #fbbf24; }
.badge-completed  { background: rgba(34,197,94,0.2);   color: #4ade80; }
.badge-dropped    { background: rgba(239,68,68,0.2);   color: #f87171; }

/* ── Grade Rating ── */
.grade-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 700;
  min-width: 28px;
  padding: 2px 6px;
  border-radius: 6px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  letter-spacing: 0;
  user-select: none;
}

.grade-select {
  padding: 6px 8px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--text-primary);
  font-size: 13px;
  font-weight: 600;
  outline: none;
  cursor: pointer;
  min-width: 90px;
}
.grade-select:focus { border-color: var(--accent); }
.grade-select option { background: var(--bg-secondary); }

/* ── Cover Upload ── */
.cover-upload-group {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
}

.cover-preview {
  width: 56px;
  height: 84px;
  object-fit: cover;
  border-radius: var(--radius);
  border: 1px solid var(--border);
  flex-shrink: 0;
}

.cover-upload-controls {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

.cover-upload-btn {
  cursor: pointer;
  flex-shrink: 0;
}

.cover-filename {
  font-size: 12px;
  color: var(--text-muted);
  word-break: break-all;
}

/* ── Cast Multi-select ── */
.cast-select {
  min-height: 80px;
}

.cast-hint {
  font-size: 11px;
  color: var(--text-muted);
  margin-top: 3px;
}

/* ── Cards ── */
.media-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 16px;
  padding: 20px 28px;
}

.media-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  overflow: hidden;
  cursor: pointer;
  transition: transform 0.15s, box-shadow 0.15s, border-color 0.15s;
  position: relative;
}

.media-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow);
  border-color: var(--border-light);
}

.card-cover {
  width: 100%;
  aspect-ratio: 2/3;
  object-fit: cover;
  display: block;
}

.card-cover-placeholder {
  width: 100%;
  aspect-ratio: 2/3;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 40px;
  background: var(--bg-tertiary);
}

.card-body {
  padding: 10px 12px 12px;
}

.card-title {
  font-size: 12.5px;
  font-weight: 600;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-bottom: 4px;
}

.card-meta {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 6px;
  flex-wrap: wrap;
  gap: 4px;
}

.card-menu {
  position: absolute;
  top: 6px;
  right: 6px;
  opacity: 0;
  transition: opacity 0.15s;
}

.media-card:hover .card-menu { opacity: 1; }

.card-menu-btn {
  background: rgba(0,0,0,0.7);
  border: none;
  border-radius: 6px;
  color: #fff;
  padding: 3px 7px;
  font-size: 14px;
  cursor: pointer;
}

.card-dropdown {
  position: absolute;
  top: 30px;
  right: 0;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  z-index: 100;
  min-width: 120px;
  overflow: hidden;
}

.card-dropdown.hidden { display: none; }

.card-dropdown-item {
  display: block;
  width: 100%;
  padding: 8px 14px;
  text-align: left;
  background: none;
  border: none;
  color: var(--text-primary);
  font-size: 13px;
  cursor: pointer;
}
.card-dropdown-item:hover { background: var(--bg-hover); }
.card-dropdown-item.danger { color: #ef4444; }

/* ── List View ── */
.media-list {
  display: flex;
  flex-direction: column;
  gap: 0;
  padding: 0 28px 20px;
}

.list-item {
  display: grid;
  grid-template-columns: 40px 1fr auto auto auto auto;
  align-items: center;
  gap: 12px;
  padding: 10px 14px;
  border-bottom: 1px solid var(--border);
  cursor: pointer;
  transition: background 0.12s;
  border-radius: var(--radius);
  margin-bottom: 2px;
}

.list-item:hover { background: var(--bg-secondary); }

.list-thumb {
  width: 36px;
  height: 52px;
  border-radius: 4px;
  object-fit: cover;
  background: var(--bg-tertiary);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  flex-shrink: 0;
  overflow: hidden;
}

.list-thumb img { width: 100%; height: 100%; object-fit: cover; }

.list-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
}

.list-subtitle {
  font-size: 12px;
  color: var(--text-muted);
  margin-top: 2px;
}

.list-actions {
  display: flex;
  gap: 6px;
  opacity: 0;
  transition: opacity 0.15s;
}
.list-item:hover .list-actions { opacity: 1; }

/* ── Toolbar ── */
.library-toolbar {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 14px 28px;
  border-bottom: 1px solid var(--border);
  background: var(--bg-primary);
  flex-wrap: wrap;
}

.search-input {
  flex: 1;
  min-width: 200px;
  padding: 7px 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--text-primary);
  font-size: 13.5px;
  outline: none;
  transition: border-color 0.15s;
}
.search-input:focus { border-color: var(--accent); }
.search-input::placeholder { color: var(--text-muted); }

.view-toggle {
  display: flex;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden;
}

.view-toggle-btn {
  padding: 6px 10px;
  border: none;
  background: none;
  color: var(--text-muted);
  cursor: pointer;
  font-size: 15px;
  transition: background 0.15s, color 0.15s;
}

.view-toggle-btn.active {
  background: var(--accent);
  color: #fff;
}

.sort-select {
  padding: 7px 10px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--text-primary);
  font-size: 13px;
  outline: none;
  cursor: pointer;
}

/* ── Filter Sidebar (in library view) ── */
.library-layout {
  display: grid;
  grid-template-columns: 210px 1fr;
  height: calc(100vh - 120px);
}

.filter-sidebar {
  border-right: 1px solid var(--border);
  overflow-y: auto;
  padding: 16px;
}

.filter-sidebar h3 {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.7px;
  color: var(--text-muted);
  margin-bottom: 8px;
  margin-top: 16px;
}

.filter-sidebar h3:first-child { margin-top: 0; }

.filter-option {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 5px 8px;
  border-radius: var(--radius);
  cursor: pointer;
  font-size: 13px;
  color: var(--text-secondary);
  transition: background 0.12s, color 0.12s;
  border: none;
  background: none;
  width: 100%;
  text-align: left;
}

.filter-option:hover { background: var(--bg-hover); color: var(--text-primary); }

.filter-option.active {
  background: var(--accent-light);
  color: var(--accent);
}

.filter-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.filter-count {
  margin-left: auto;
  font-size: 11px;
  color: var(--text-muted);
  background: var(--bg-tertiary);
  padding: 1px 6px;
  border-radius: 10px;
}

.library-content { overflow-y: auto; }

/* ── Pagination ── */
.pagination {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 16px;
}

.page-info { font-size: 13px; color: var(--text-muted); }

/* ── Modal ── */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  backdrop-filter: blur(2px);
}

.modal {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow);
  width: 100%;
  max-width: 580px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 18px 22px 14px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}

.modal-header h2 { font-size: 16px; font-weight: 700; }

.modal-close {
  background: none;
  border: none;
  color: var(--text-muted);
  font-size: 16px;
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  transition: color 0.15s, background 0.15s;
}
.modal-close:hover { color: var(--text-primary); background: var(--bg-tertiary); }

.modal-body {
  overflow-y: auto;
  padding: 18px 22px;
  flex: 1;
}

.modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  padding: 14px 22px;
  border-top: 1px solid var(--border);
  flex-shrink: 0;
}

/* ── Form Elements ── */
.form-group {
  margin-bottom: 14px;
}

.form-label {
  display: block;
  font-size: 12.5px;
  font-weight: 600;
  color: var(--text-secondary);
  margin-bottom: 5px;
  text-transform: uppercase;
  letter-spacing: 0.4px;
}

.form-input,
.form-select,
.form-textarea {
  width: 100%;
  padding: 8px 12px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--text-primary);
  font-size: 13.5px;
  outline: none;
  transition: border-color 0.15s;
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus { border-color: var(--accent); }

.form-input::placeholder,
.form-textarea::placeholder { color: var(--text-muted); }

.form-select option { background: var(--bg-secondary); }

.form-textarea {
  resize: vertical;
  min-height: 80px;
}

.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

.status-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 6px;
}

.status-option {
  padding: 7px 6px;
  border: 1.5px solid var(--border);
  border-radius: var(--radius);
  text-align: center;
  font-size: 11.5px;
  font-weight: 600;
  cursor: pointer;
  color: var(--text-muted);
  background: none;
  transition: all 0.15s;
}

.status-option:hover { border-color: var(--border-light); color: var(--text-primary); }
.status-option.selected-wishlist    { border-color: #818cf8; color: #818cf8; background: rgba(99,102,241,0.1); }
.status-option.selected-owned       { border-color: #4ade80; color: #4ade80; background: rgba(34,197,94,0.1); }
/* Legacy — kept for in-flight items */
.status-option.selected-in_progress { border-color: #fbbf24; color: #fbbf24; background: rgba(245,158,11,0.1); }
.status-option.selected-completed   { border-color: #4ade80; color: #4ade80; background: rgba(34,197,94,0.1); }
.status-option.selected-dropped     { border-color: #f87171; color: #f87171; background: rgba(239,68,68,0.1); }

/* ── Tag Input ── */
.tag-input-container {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  padding: 6px 10px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  min-height: 40px;
  cursor: text;
  transition: border-color 0.15s;
}

.tag-input-container:focus-within { border-color: var(--accent); }

.tag-chip {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 500;
  background: var(--accent-light);
  color: var(--accent);
}

.tag-chip-remove {
  background: none;
  border: none;
  cursor: pointer;
  color: inherit;
  font-size: 12px;
  padding: 0;
  line-height: 1;
}

.tag-text-input {
  border: none;
  outline: none;
  background: none;
  color: var(--text-primary);
  font-size: 13px;
  min-width: 80px;
  flex: 1;
}

.tag-suggestions {
  position: absolute;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  z-index: 200;
  max-height: 160px;
  overflow-y: auto;
  min-width: 160px;
}

.tag-suggestion {
  padding: 7px 12px;
  cursor: pointer;
  font-size: 13px;
  display: flex;
  align-items: center;
  gap: 8px;
}
.tag-suggestion:hover { background: var(--bg-hover); }

/* ── Dashboard ── */
.dashboard { padding: 24px 28px; }

.stat-cards {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 14px;
  margin-bottom: 28px;
}

.stat-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 18px 20px;
}

.stat-card-label {
  font-size: 11.5px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.6px;
  color: var(--text-muted);
  margin-bottom: 6px;
}

.stat-card-value {
  font-size: 30px;
  font-weight: 800;
  color: var(--text-primary);
  line-height: 1;
}

.stat-card-sub {
  font-size: 11.5px;
  color: var(--text-muted);
  margin-top: 4px;
}

.dashboard-section {
  margin-bottom: 28px;
}

.dashboard-section h2 {
  font-size: 14px;
  font-weight: 700;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 14px;
}

/* Category bars */
.category-bar-row {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 8px;
}

.category-bar-label {
  width: 90px;
  font-size: 13px;
  color: var(--text-secondary);
  display: flex;
  align-items: center;
  gap: 6px;
  flex-shrink: 0;
}

.category-bar-track {
  flex: 1;
  height: 8px;
  background: var(--bg-tertiary);
  border-radius: 4px;
  overflow: hidden;
}

.category-bar-fill {
  height: 100%;
  border-radius: 4px;
  transition: width 0.4s ease;
}

.category-bar-count {
  width: 32px;
  text-align: right;
  font-size: 12.5px;
  color: var(--text-muted);
  flex-shrink: 0;
}

/* Recent completed row */
.recent-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 12px;
}

/* ── Toast ── */
.toast {
  position: fixed;
  bottom: 24px;
  right: 24px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 12px 18px;
  box-shadow: var(--shadow);
  z-index: 2000;
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 13.5px;
  animation: toastIn 0.2s ease;
  max-width: 320px;
}

.toast.success { border-left: 3px solid #22c55e; }
.toast.error   { border-left: 3px solid #ef4444; }
.toast.info    { border-left: 3px solid var(--accent); }

@keyframes toastIn {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ── Categories Management ── */
.categories-page { padding: 24px 28px; }

.category-list { display: flex; flex-direction: column; gap: 8px; }

.category-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
}

.category-icon-preview {
  font-size: 20px;
  width: 32px;
  text-align: center;
}

.category-color-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  flex-shrink: 0;
}

.category-name { flex: 1; font-size: 14px; font-weight: 600; }

.category-count {
  font-size: 12px;
  color: var(--text-muted);
  background: var(--bg-tertiary);
  padding: 2px 8px;
  border-radius: 10px;
}

.system-badge {
  font-size: 10px;
  color: var(--text-muted);
  background: var(--bg-tertiary);
  padding: 2px 8px;
  border-radius: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.add-category-form {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 16px;
  margin-top: 12px;
}

.add-category-form h3 {
  font-size: 14px;
  font-weight: 600;
  margin-bottom: 12px;
}

.color-input {
  width: 48px;
  height: 34px;
  padding: 2px;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  cursor: pointer;
  background: var(--bg-tertiary);
}

/* ── Settings / Field Lists Page — two-panel layout ── */

/* Outer two-column grid: nav list | detail panel */
.settings-layout {
  display: grid;
  grid-template-columns: 220px 1fr;
  height: calc(100vh - 88px); /* subtract page-header height */
  overflow: hidden;
}

/* Left nav */
.settings-nav {
  border-right: 1px solid var(--border);
  overflow-y: auto;
  padding: 12px 0;
  scrollbar-width: thin;
  scrollbar-color: var(--border) transparent;
}

.settings-nav-group { margin-bottom: 4px; }

.settings-nav-group-label {
  padding: 8px 16px 4px;
  font-size: 10.5px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.7px;
  color: var(--text-muted);
}

.settings-nav-item {
  display: block;
  width: 100%;
  text-align: left;
  padding: 7px 16px;
  font-size: 13px;
  color: var(--text-secondary);
  background: none;
  border: none;
  cursor: pointer;
  transition: background 0.12s, color 0.12s;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.settings-nav-item:hover { background: var(--bg-hover); color: var(--text-primary); }

.settings-nav-item.active {
  background: var(--accent-light);
  color: var(--accent);
  border-right: 2px solid var(--accent);
}

/* Right panel */
.settings-panel {
  overflow-y: auto;
  padding: 24px 32px;
  scrollbar-width: thin;
  scrollbar-color: var(--border) transparent;
}

.settings-panel-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  gap: 10px;
  color: var(--text-muted);
  text-align: center;
}

.settings-panel-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 18px;
  padding-bottom: 14px;
  border-bottom: 1px solid var(--border);
}

.settings-panel-title {
  font-size: 16px;
  font-weight: 700;
  color: var(--text-primary);
}

/* Shared value-list components (used inside the right panel) */
.settings-value-count {
  font-size: 11px;
  color: var(--text-muted);
  background: var(--bg-tertiary);
  padding: 2px 7px;
  border-radius: 10px;
}

.settings-value-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-bottom: 16px;
  max-width: 600px;
}

.settings-empty-hint {
  font-size: 13px;
  color: var(--text-muted);
  padding: 12px 0;
  font-style: italic;
}

.settings-value-row {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
}

.settings-value-display {
  flex: 1;
  font-size: 13px;
  color: var(--text-primary);
}

.settings-value-input { flex: 1; }

.settings-value-actions {
  display: flex;
  gap: 4px;
  flex-shrink: 0;
}

.settings-add-row {
  display: flex;
  align-items: center;
  gap: 8px;
  max-width: 600px;
}

.settings-add-row .form-input {
  flex: 1;
}
